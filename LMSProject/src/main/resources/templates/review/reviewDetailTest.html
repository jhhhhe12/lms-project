<html layout:decorate="~{layout}">
<div layout:fragment="content" class="main-content mt-5">
    <h1>리뷰 상세페이지</h1>
    <hr>
    <div class="card my-3">
        <div class="card-body">
            <div class="card-text" style="white-space: pre-line;" th:text="${review.content}"></div>
            <div class="d-flex justify-content-end">
                <div class="badge bg-light text-dark p-2 text-start">
                    <div class="mb-2">
                        <span th:if="${review.member != null}" th:text="${review.member.name}"></span>
                    </div>
                    <div th:text="${#temporals.format(review.credate, 'yyyy-MM-dd HH:mm')}"></div>
                </div>
            </div>
            <div class="my-3">
                <a th:href="@{|/review/modify/${review.reviewno}|}" class="btn btn-sm btn-outline-secondary"
                   sec:authorize="isAuthenticated()"
                   th:text="수정"></a>
			   <form th:action="@{|/review/delete/${review.reviewno}|}" method="post" style="display:inline;" class="delete-form">
			       <button type="submit" class="btn btn-sm btn-outline-secondary">삭제</button>
			   </form>
            </div>
        </div>
    </div>
	<form th:action="@{|/course/detail/${course.courseno}|}" method="get">
	    <button type="submit" class="btn btn-primary my-2">돌아가기</button>
	</form>
</div>

<script layout:fragment="script" type="text/javascript">
    // 삭제 confirm
    const deleteForms = document.getElementsByClassName('delete-form');
    Array.from(deleteForms).forEach(function(form){
        form.addEventListener('submit', function(e){
            if(!confirm("정말로 삭제하시겠습니까?")){
                e.preventDefault(); // 취소하면 제출 막기
            }
        });
    });
</script>

</html>
