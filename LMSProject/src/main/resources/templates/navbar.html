<nav th:fragment="navbarFragment" class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm">
	<div class="container-fluid">
		<!-- 로고 -->
		<a class="navbar-brand" href="/">
			<img src="/images/logo.png" alt="logo">
		</a>

		<!-- 햄버거 토글 (Bootstrap 네이티브 속성 포함) -->
		<button class="navbar-toggler" type="button" id="navbarToggle" aria-controls="navbarContent"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<!--검색기능 -->
		<div class="collapse navbar-collapse" id="navbarContent">
			<form th:action="@{/course/list}" method="get" class="d-flex custom-search-margin my-2 my-lg-0" role="search">
				<div class="input-group">
				<input type="text" name="kw" th:value="${kw}" placeholder="검색어 입력" class="form-control">
				<button type="submit" class="btn btn-primary">검색</button>
				</div>
			</form>
		

			<!--드롭다운-->
			<script th:src="@{/js/navbar_dropdown.js}"></script>
	
			<div class="dropdown-container" sec:authorize="isAuthenticated() and hasAnyRole('ADMIN', 'USER')">
				<select class="custom-dropdown" id="courseDropdown">
					<option selected disabled>내 강좌 바로가기</option>
					<option th:each="apply : ${applyList}" th:if="${apply != null and apply.status == 1}"
						th:attr="value=@{/course/detail/{id}(id=${apply.course.courseno})}" th:text="${apply.course.title}">
					</option>
					<option th:if="${applyList == null or #lists.isEmpty(applyList)}" disabled>수강 중인 강좌 없음</option>
				</select>
				<span class="dropdown-arrow">▼</span>
			</div>
	
			<ul class="navbar-nav ms-lg-3 mt-3 mt-lg-0">
				<th:block sec:authorize="isAuthenticated()">
					<li class="nav-item me-lg-2">
						<a class="nav-link" th:href="@{/member/list}" sec:authorize="hasRole('ADMIN')">회원리스트</a>
					</li>
					<li class="nav-item me-lg-2">
						<a class="nav-link" th:href="@{/category/list}" sec:authorize="hasAnyRole('ADMIN', 'INSTRUCTOR')">강좌
							등록</a>
					</li>
					<li class="nav-item me-lg-2">
						<a class="nav-link" th:href="@{/member/logout}">로그아웃</a>
					</li>
					<li class="nav-item me-lg-2">
						<a class="nav-link" th:href="@{/member/detail}">마이페이지</a>
					</li>
				</th:block>
	
				<th:block sec:authorize="isAnonymous()">
					<li class="nav-item">
						<a class="nav-link" th:href="@{/member/login}">로그인</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" th:href="@{/member/create}">회원 가입</a>
					</li>
				</th:block>
			</ul>
		</div>
	</div>

	<!-- 사이드바 -->
	<div class="sidebar">
		<a th:href="@{/apply/list}" class="d-block px-3 py-2 text-decoration-none text-white"
			sec:authorize="hasAnyRole('ADMIN', 'USER')">
			<i class="bi bi-journal me-2"></i> 나의 학습방
		</a>
		<a th:href="@{/course/instructor/list}" class="d-block px-3 py-2 text-decoration-none text-white"
			sec:authorize="hasAnyRole('ADMIN', 'INSTRUCTOR')">
			<i class="bi bi-journal me-2"></i> 나의 강좌
		</a>
		<a th:href="@{/course/list}" class="d-block px-3 py-2 text-decoration-none text-white">
			<i class="bi bi-calendar-event me-2"></i> 모든 강좌 보기
		</a>
		<a th:href="@{/memo/list}" class="d-block px-3 py-2 text-decoration-none text-white"
			sec:authorize="hasAnyRole('ADMIN', 'USER')">
			<i class="bi bi-pencil me-2"></i> 강의 메모
		</a>
		<a th:href="@{/review/list}" class="d-block px-3 py-2 text-decoration-none text-white"
			sec:authorize="hasRole('ADMIN')">
			<i class="bi bi-calendar-event me-2"></i> 리뷰 전체 보기
		</a>
		<a th:href="@{/question/list}" class="d-block px-3 py-2 text-decoration-none text-white"
			sec:authorize="hasRole('ADMIN')">
			<i class="bi bi-calendar-event me-2"></i> 질문 전체 보기
		</a>
			
	</div>
	<script>
		function goToCourse(select) {
			const url = select.value;
			if (url) {
				window.location.href = url; // 선택된 강좌 상세페이지로 이동
			}
		}
	</script>
</nav>