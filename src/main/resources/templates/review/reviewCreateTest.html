<html layout:decorate="~{layout}">
   <div layout:fragment="content" class="main-content mt-5">
      <h1 class="my-3 border-bottom pb-2"> 리뷰 등록 </h1>
      <form th:object="${reviewForm}" method="post">
		<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
		<div th:replace="~{form_errors :: formErrorsFragment}"></div>
         <div class="mb-3">
			<div class="mb-3">
			    <label for="lessonno" class="form-label">강좌명</label>
				<div class="alert alert-secondary d-flex justify-content-between align-items-center mb-4">
				<h5><span th:text="${course.title}">[강좌 제목]</span></h5>
				</div>
				
			</div>
			<!-- ⭐ 별점 선택 -->
			<div class="mb-3">
				<label class="form-label d-block mb-2">별점</label>
			    <!-- 실제로 전송될 값 -->
			    <input type="hidden" name="rating" id="rating" th:field="*{rating}" required>
			    	<div class="star-rating fs-3 text-warning">
			        	<i class="fa-regular fa-star" data-value="1"></i>
			            <i class="fa-regular fa-star" data-value="2"></i>
			            <i class="fa-regular fa-star" data-value="3"></i>
			            <i class="fa-regular fa-star" data-value="4"></i>
			            <i class="fa-regular fa-star" data-value="5"></i>
			        </div>
			</div>
         <div class="mb-3">
            <label for="content" class="form-label">내용</label>
            <textarea th:field="*{content}" class="form-control" rows="5"></textarea>
         </div>
         <input type="submit" value="저장하기" class="btn btn-primary my-2">
      </form>
	  
	  <!-- FontAwesome -->
	  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
	  	<!-- ⭐ 별점 클릭 스크립트 -->
	   	<script>
	    	document.addEventListener("DOMContentLoaded", function() {
	        	const stars = document.querySelectorAll(".star-rating i");
	         	const ratingInput = document.getElementById("rating");

	         	stars.forEach(star => {
	    			star.addEventListener("click", function() {
	               		const value = this.getAttribute("data-value");
	                    ratingInput.value = value;

	                    // 별 색상 업데이트
	                    stars.forEach(s => {
	                       s.classList.remove("fa-solid");
	                       s.classList.add("fa-regular");
	                    });
	                    for (let i = 0; i < value; i++) {
	                       stars[i].classList.remove("fa-regular");
	                       stars[i].classList.add("fa-solid");
	                    }
	            	});
	        	});
	    	});
		</script>
	</div>
</html>